<html>
<head>
<title>Trigger a PD incident</title>
<link href="pdjs.css" media="screen" rel="stylesheet" type="text/css" />
<script src="lib/jquery-1.7.1.min.js"> </script>
<script src="lib/moment.min.js"> </script>
<script src="config.js"> </script>
<script type="text/javascript" src="../js/pdjs.js"> </script>
<script>
  var PDJS = new PDJSobj(pdjs_settings);

  trigger_incident = function() {
    desc = prompt("Please enter a description")
    document.getElementById("res").append(`Creating incident with subject: ${desc}`);

    PDJS.trigger({
      routing_key: "5eb2b9dae1b2480abf59f58c78ba06e7",
      description: desc,
      client: "Runbook",
      client_url: "https://i.chzbgr.com/maxW500/3308038400/h24293626/",
      details: {
        source:"PDJS demo page",
        browser: navigator.userAgent,
        timezone: ""+(new Date()).getTimezoneOffset()/60
      },
      success: function(data) {
        console.log(data);
        document.getElementById("res").append(JSON.stringify(data));
      }
    })
  }
</script>
</head>
<body>
  <button onclick="trigger_incident()" style="padding:40px;font-size:200%;">Trigger an incident</button>
  <div id="res"></div>
</body>
</html>

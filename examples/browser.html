<!--
How to use pdjs in the browser.

This example will list users contact info.
-->

<html>
  <head>
    <!-- pdjs-legacy for legacy browser support such as IE11. -->
    <!-- <script src="https://github.com/PagerDuty/pdjs/releases/download/2.1.0/pdjs-legacy.js"></script> -->
    <!-- <script src="https://github.com/PagerDuty/pdjs/releases/download/2.1.0/pdjs.js"></script> -->
    <script src="../dist/pdjs.js"></script>
    <script>
      // This token is a test read-only token.
      const pd = PagerDuty.api({token: '5b8FDWqz-pbpFZ6_WSKb', tokenType: 'token'});
      const openIncidents = pd.all('/schedules')
        .then(({resource}) => {
          console.log(resource)
          resource.forEach((model, index) => {
            pd.delete(`/schedules/${model['id']}`).then(() => {
              console.log("Success");
            }).catch((error) => {
              console.log(error);
            })
          })
        })
        .catch(console.error);
    </script>
  </head>
  <body>
    <ul id="listOfUsers"></ul>
  </body>
</html>
